:root{--primary-color: #ff4500;--background-color: #f4f4f4;--text-color: #333;--modal-bg: #fff;--modal-shadow: rgba(0, 0, 0, .4)}*{box-sizing:border-box;margin:0;padding:0}body{font-family:Helvetica Neue,Arial,Hiragino Kaku Gothic ProN,Hiragino Sans,Meiryo,sans-serif;background-color:var(--background-color);color:var(--text-color);line-height:1.6}body.body-modal-open{overflow:hidden}#app{max-width:90%;margin:20px auto;padding:20px;text-align:center}h1{color:var(--primary-color);margin-bottom:10px}.legend-container{display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:15px;margin-bottom:20px}.legend-item{display:flex;align-items:center;font-size:.9rem;color:#555}.legend-box{width:16px;height:16px;border-radius:4px;margin-right:8px;border:1px solid rgba(0,0,0,.1)}.legend-default{background-color:#ffe265cc}.legend-promo{background-color:#13aee7cc}.legend-search{background-color:#b881e1cc}.legend-selected{background-color:#ff4500cc}p{margin-bottom:20px;color:#666}.search-container{margin-bottom:20px;display:flex;justify-content:center;align-items:center;gap:10px}#search-input{width:100%;max-width:400px;padding:12px 15px;font-size:1rem;border:2px solid #ddd;border-radius:25px;transition:border-color .3s,box-shadow .3s}#search-input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 5px #ff45004d}#toggle-magnifier-btn{padding:10px 20px;font-size:1rem;font-weight:700;cursor:pointer;border-radius:25px;border:2px solid var(--primary-color);background-color:transparent;color:var(--primary-color);transition:background-color .2s,color .2s;flex-shrink:0}#toggle-magnifier-btn:hover,#toggle-magnifier-btn[aria-pressed=true]{background-color:var(--primary-color);color:#fff}.data-source{margin-top:40px;padding-top:20px;border-top:1px solid #ccc;text-align:center}.data-source h3{margin-bottom:10px;color:#666;font-size:1.2rem}.data-source ul{list-style:none;padding:0;display:flex;justify-content:center;gap:20px}.data-source a{color:var(--primary-color);text-decoration:none;font-weight:700}.data-source a:hover{text-decoration:underline}.recommendation-note{margin:20px auto;padding:15px 20px;background-color:#fffbe6;border:1px solid #ffeeba;border-radius:8px;max-width:800px;width:90%}.recommendation-note p{margin:0;color:#856404;font-size:.9rem;font-weight:500;line-height:1.5}.row-indicator-current,.row-indicator-adjacent{background-color:#000000a6;color:#fff;border-radius:4px;text-align:center;min-width:28px;line-height:1}.row-indicator-current{font-size:16px;font-weight:700;padding:6px 8px;border:1px solid rgba(255,255,255,.5)}.row-indicator-adjacent{font-size:12px;font-weight:400;padding:3px 6px;color:#ccc}@keyframes pulse-glow{0%{border-color:#ff4500b3;box-shadow:0 0 8px #ff450080}50%{border-color:var(--primary-color);box-shadow:0 0 16px var(--primary-color)}to{border-color:#ff4500b3;box-shadow:0 0 8px #ff450080}}.loading-text{font-weight:700;background:linear-gradient(90deg,#666,#bbb,#666);background-size:200% auto;-webkit-background-clip:text;background-clip:text;color:transparent;animation:loading-shimmer 2s infinite linear}@keyframes loading-shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}#map-container{position:relative;width:100%;max-width:1440px;margin:20px auto;border:2px solid #ddd;border-radius:8px;overflow:hidden;box-shadow:0 4px 12px #0000001a}#map-image{display:block;width:100%;height:auto}.stall-area{position:absolute;background-color:#ffe265f2;border:1px solid transparent;cursor:pointer;transition:background-color .3s ease,border-color .3s ease,transform .3s ease,box-shadow .3s ease,color .3s ease;display:flex;align-items:center;justify-content:center;font-size:.5rem;font-weight:700;color:#0009;-webkit-user-select:none;user-select:none;text-shadow:0 0 2px white}.mobile-only-group,.stall-area.is-grouped-member{display:none}.stall-area.has-promo{background-color:#13aee7f2;color:#000c}.stall-area.is-search-match{border:1px solid rgba(184,129,225,1);background-color:#b881e1e6;z-index:10;color:#fff;text-shadow:-1px -1px 0 #00000045,1px -1px 0 #00000045,-1px 1px 0 #00000045,1px 1px 0 #00000045;font-weight:400}.stall-area:hover{background-color:#ff4500cc;border-color:var(--primary-color);color:#fff;text-shadow:none}.stall-area.is-selected{background-color:#ff4500f2;border:2px solid var(--primary-color);color:#fff;text-shadow:none;z-index:11}.stall-group-area{font-size:1rem;color:#666;background-color:#ffc10733;text-shadow:-1px -1px 0 #ffffff8a,1px -1px 0 #ffffff8a,-1px 1px 0 #ffffff8a,1px 1px 0 #ffffff8a}.stall-group-area:hover{background-color:#ff450080;border-color:#0003;color:#333}.debug-border{display:none;position:absolute;border:2px dashed rgba(255,0,0,.7);pointer-events:none;z-index:100;box-sizing:border-box}#map-container.debug-mode .debug-border{display:block}.debug-border span{position:absolute;top:2px;left:2px;background-color:#ff0000b3;color:#fff;padding:1px 4px;font-size:12px;font-weight:700;border-radius:3px}#tooltip{position:fixed;background-color:#000000d9;color:#fff;padding:8px 12px;border-radius:6px;font-size:14px;pointer-events:none;z-index:2500;opacity:0;transform:translateY(15px);transition:opacity .2s ease,transform .2s ease;white-space:nowrap;line-height:1.4;text-align:left}#tooltip.hidden{opacity:0}#tooltip:not(.hidden){opacity:1;transform:translateY(0)}#map-container.magnifying,#map-container.magnifying .stall-area{cursor:none}#magnifier-wrapper{position:absolute;width:200px;height:200px;pointer-events:auto;cursor:move;display:none;z-index:50}#magnifier{position:absolute;top:0;left:0;width:100%;height:100%;border:4px solid var(--primary-color);border-radius:50%;box-shadow:0 5px 15px #0000004d;background-repeat:no-repeat;overflow:hidden;pointer-events:none}#magnifier-stall-layer{position:absolute;top:0;left:0;transform-origin:top left;pointer-events:auto}#magnifier-marker{position:absolute;top:50%;left:50%;width:24px;height:24px;margin-left:-12px;margin-top:-12px;z-index:55;pointer-events:none;border:2px solid rgba(255,69,0,.2);border-radius:50%;background-color:#ff450026;box-shadow:0 0 5px #0006}#magnifier-marker:before,#magnifier-marker:after{content:none}#magnifier-row-indicator-container{position:absolute;left:0;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:center;gap:4px;z-index:60;pointer-events:none;-webkit-user-select:none;user-select:none}#magnifier-stall-layer .stall-area{white-space:nowrap;text-overflow:clip;font-size:.5rem}#magnifier-stall-layer .stall-group-area{font-size:.4rem}#modal{position:fixed;top:0;left:0;width:100%;height:100%;z-index:2000;display:flex;align-items:center;justify-content:center;opacity:1;pointer-events:auto;transition:opacity .3s ease;flex-direction:column}#modal.hidden{opacity:0;pointer-events:none}.modal-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--modal-shadow)}.modal-wrapper{flex-grow:1;width:100%;display:flex;align-items:center;justify-content:center}.modal-content{position:relative;background-color:var(--modal-bg);border-radius:12px;box-shadow:0 5px 20px var(--modal-shadow);max-width:90%;width:650px;z-index:2001;transform:translateY(0);transition:transform .3s ease;max-height:calc(95vh - 220px);display:flex;flex-direction:column;overflow:hidden}#modal.hidden .modal-content{transform:translateY(-20px)}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:20px 30px;border-bottom:1px solid #eee;flex-shrink:0}#modal-close{background:none;border:none;font-size:2.5rem;color:#aaa;cursor:pointer;line-height:1;transition:color .2s;padding:0}#modal-close:hover{color:var(--primary-color)}#modal-title{margin:0;color:var(--primary-color);font-size:1.6rem;text-align:left;flex-grow:1;padding-right:20px}#modal-body{text-align:left;overflow-y:auto;padding:20px 30px}#modal-footer{padding:15px 30px;border-top:1px solid #eee;flex-shrink:0;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:10px;background-color:#f9f9f9}#modal-footer:empty{display:none;padding:0;border-top:none}.official-stall-image{max-width:100%;height:auto;max-height:calc(100vh - 460px);display:block;border-radius:8px;border:1px solid #eee;margin:0 auto 15px;cursor:pointer;transition:opacity .2s ease-in-out}.official-stall-image:hover{opacity:.85}.promo-section-separator{border:none;border-top:1px solid #ddd;margin:25px 0}.promo-entry-separator{margin-top:25px;padding-top:20px;border-top:1px solid #eee}.promo-entry .modal-user-info{margin-bottom:12px}.promo-tags-container{margin-top:8px;margin-bottom:12px;display:flex;flex-wrap:wrap;gap:6px}.promo-tag{background-color:#e9e9eb;color:#555;padding:3px 8px;border-radius:12px;font-size:.8rem;font-weight:500;white-space:nowrap}.promo-html-content{line-height:1.6;word-break:break-word}.promo-html-content img{max-width:100%;height:auto;border-radius:8px;margin-top:10px;margin-bottom:10px;border:1px solid #eee;cursor:pointer;transition:opacity .2s ease-in-out}.promo-html-content img:hover{opacity:.85}#modal-body a{color:var(--primary-color);font-weight:700;text-decoration:none;word-break:break-all}#modal-body a:hover{text-decoration:underline}.modal-user-info{display:flex;align-items:center}.modal-avatar{width:40px;height:40px;border-radius:50%;margin-right:12px;border:2px solid #ddd}.modal-username{font-weight:700;font-size:1.1rem;color:#555}.footer-link{display:inline-block;font-size:.9rem;padding:8px 12px;background-color:var(--primary-color);color:#fff;text-decoration:none;border-radius:6px;font-weight:700;text-align:center;transition:background-color .2s,transform .2s}.footer-link:hover{background-color:#d63a00;transform:translateY(-2px);text-decoration:none}.modal-mini-map{display:flex;max-width:90%;width:650px;z-index:2001;margin-top:1rem;margin-bottom:auto;border-radius:12px;overflow:hidden;background-color:#f9f9f9}.modal-magnifier-content{position:relative;height:100%;display:flex;padding-left:2.5rem}#modal-vertical-stall-list{display:none;flex-direction:column;padding:10px;gap:8px;overflow-y:auto;flex-shrink:0;background-color:#f0f0f0;border-right:1px solid #ddd;height:100%;width:70px;scrollbar-width:thin;scrollbar-color:rgba(0,0,0,.2) transparent}#modal-vertical-stall-list::-webkit-scrollbar{width:6px}#modal-vertical-stall-list::-webkit-scrollbar-track{background:transparent}#modal-vertical-stall-list::-webkit-scrollbar-thumb{background-color:#0003;border-radius:10px}#modal-vertical-stall-list::-webkit-scrollbar-thumb:hover{background-color:#0006}.modal-vertical-stall-item{width:28px;height:28px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:.9rem;font-weight:700;cursor:pointer;transition:all .2s ease-in-out;-webkit-user-select:none;user-select:none;flex-shrink:0;background-color:#ffc107cc;border:1px solid transparent;color:#0009;text-shadow:0 0 2px white}.modal-vertical-stall-item.has-promo{background-color:#007bffcc;color:#000c}.modal-vertical-stall-item.is-search-match{border:2px solid #8A2BE2;background-color:#8a2be2b3;z-index:1;color:#fff;text-shadow:-1px -1px 0 #00000045,1px -1px 0 #00000045,-1px 1px 0 #00000045,1px 1px 0 #00000045}.modal-vertical-stall-item.is-selected{background-color:#ff4500cc;border:2px solid var(--primary-color);color:#fff;text-shadow:none;z-index:2;transform:scale(1.1);box-shadow:0 2px 8px #0000004d}.modal-vertical-stall-item:hover:not(.is-selected){background-color:#ff4500cc;border-color:var(--primary-color);color:#fff;text-shadow:none;transform:translateY(-1px)}.modal-vertical-stall-item.is-selected:hover{transform:scale(1.1) translateY(-1px)}#modal-nav-controls{display:none;grid-template-areas:". up ." "left . right" ". down .";grid-template-columns:1fr auto 1fr;gap:5px;padding:10px;justify-items:center;border-bottom:1px solid #eee;background-color:#f9f9f9;flex-shrink:0}.modal-nav-btn{background-color:#fff;border:1px solid #ccc;border-radius:8px;width:24px;height:24px;font-size:1rem;color:#555;cursor:pointer;transition:background-color .2s,border-color .2s,color .2s,transform .2s ease,box-shadow .2s ease;-webkit-user-select:none;user-select:none;align-self:center}.modal-nav-btn:not(:disabled):hover{background-color:var(--primary-color);border-color:var(--primary-color);color:#fff;transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.modal-nav-btn:disabled{opacity:.3;cursor:not-allowed}#modal-nav-up{grid-area:up}#modal-nav-down{grid-area:down}#modal-nav-left{grid-area:left;justify-self:end;margin-right:1rem}#modal-nav-right{grid-area:right;justify-self:start;margin-left:1rem}#modal-magnifier-wrapper{position:relative;height:220px;flex-shrink:0;flex-grow:1;display:none;border-bottom:1px solid #eee;border-radius:12px;overflow:hidden}#modal #modal-magnifier-wrapper .stall-group-area{display:block}#modal #modal-magnifier-wrapper .is-grouped-member{display:none}#modal-magnifier{position:relative;flex-grow:1;height:100%;background-repeat:no-repeat;overflow:hidden;pointer-events:none;transition:background-position .4s ease-in-out}#modal-magnifier-stall-layer{position:absolute;top:0;left:0;transform-origin:top left;pointer-events:auto;transition:transform .4s ease-in-out}#modal-magnifier-stall-layer .modal-map-hidden{visibility:hidden}.modal-stall-highlight{position:absolute;z-index:10;animation:pulse-glow 2.5s infinite ease-in-out;background-color:transparent;border:2px solid var(--primary-color);pointer-events:none;transition:width .4s ease-in-out,height .4s ease-in-out,top .4s ease-in-out,left .4s ease-in-out}#modal-magnifier-row-indicator-container{position:absolute;left:0;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:center;gap:4px;z-index:60;pointer-events:none;-webkit-user-select:none;user-select:none}#modal-magnifier-stall-layer .stall-area{white-space:nowrap;text-overflow:clip;font-size:.5rem}#modal-magnifier-stall-layer .stall-group-area{font-size:.55rem}.lightbox-container{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000e6;z-index:3000;display:flex;justify-content:center;align-items:center;opacity:1;transition:opacity .3s ease}.lightbox-container.hidden{opacity:0;pointer-events:none}.lightbox-overlay{position:absolute;top:0;left:0;width:100%;height:100%;cursor:pointer}.lightbox-close{position:absolute;top:15px;right:30px;color:#fff;font-size:3rem;font-weight:700;cursor:pointer;background:none;border:none;line-height:1;padding:0;z-index:3001;text-shadow:0 1px 3px rgba(0,0,0,.5)}.lightbox-image{max-width:90vw;max-height:90vh;object-fit:contain;box-shadow:0 5px 25px #00000080;border-radius:4px;position:relative;z-index:3001}@media (max-width: 768px){.modal-content,.modal-mini-map{max-width:95%}#map-container>.stall-area:not(.stall-group-area){display:none}#map-container>.stall-group-area.mobile-only-group{display:flex}#magnifier-stall-layer .stall-area{font-size:.2rem}#magnifier-stall-layer .stall-group-area{font-size:.28rem}#modal-magnifier-stall-layer .stall-area{font-size:.2rem}#modal-magnifier-stall-layer .stall-group-area{font-size:.22rem}}@media (max-width: 600px){#app{padding:10px}.modal-header,#modal-body,#modal-footer{padding:15px}.footer-link{padding:4px 8px}}
